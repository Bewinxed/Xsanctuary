#!/bin/sh

echo "ğŸ” Running pre-push checks..."

# Run type checking
echo "ğŸ“ Type checking..."
bun run check
if [ $? -ne 0 ]; then
  echo "âŒ Type check failed. Push aborted."
  exit 1
fi

# Build Chrome extension
echo "ğŸ—ï¸  Building Chrome extension..."
bun run build
if [ $? -ne 0 ]; then
  echo "âŒ Chrome build failed. Push aborted."
  exit 1
fi

# Build Firefox extension
echo "ğŸ—ï¸  Building Firefox extension..."
bun run build:firefox
if [ $? -ne 0 ]; then
  echo "âŒ Firefox build failed. Push aborted."
  exit 1
fi

echo "âœ… All checks passed. Pushing..."
exit 0
